(self.webpackChunkapp_ambep=self.webpackChunkapp_ambep||[]).push([[4764],{4764:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LoginPageModule:()=>d});var n=o(1116),a=o(1462),i=o(8809),s=o(4905),r=o(7267),l=o(8619),c=o(7344),g=o(8205),p=o(6620);const u=[{path:"",component:(()=>{class e{constructor(e,t,o,n,a,i,s,r){this.navCtrl=e,this.api=t,this.router=o,this.activatedRoute=n,this.loadingController=a,this.toastController=i,this.controleAcessoProvider=s,this.appComponent=r,this.account={email:"",senha:""}}ngOnInit(){console.log("LoginPage"),localStorage.removeItem("ambepToken"),localStorage.removeItem("ambepUser"),this.loading=this.loadingController.create({cssClass:"my-custom-class",message:"Aguarde...",duration:-1}),null!==this.activatedRoute.snapshot.paramMap.get("email")&&(this.account.email=this.activatedRoute.snapshot.paramMap.get("email")),null!==this.activatedRoute.snapshot.paramMap.get("senha")&&(this.account.senha=r.Z.decrypt("login",this.activatedRoute.snapshot.paramMap.get("senha"))),null!==this.activatedRoute.snapshot.paramMap.get("email")&&null!==this.activatedRoute.snapshot.paramMap.get("senha")&&this.autenticar()}autenticar(){if(""!==this.account.email&&null!=this.account.email)if(""!==this.account.senha&&null!=this.account.senha){var e=this;e.loading.then(e=>{e.present()}),this.api.post("/AppControleAcesso/Token",this.account).then(t=>{localStorage.setItem("ambepToken",t.token),console.log(t),e.requestUser()},t=>{e.loading.then(e=>{e.dismiss()}),e.toastController.create({message:t.message,position:"bottom",duration:6e3,color:"danger"}).then(e=>{e.present()})})}else this.toastController.create({message:"Por favor, informe a senha",position:"top",duration:5e3,color:"danger"}).then(e=>{e.present()});else this.toastController.create({message:"Por favor, informe o e-mail!",position:"top",duration:5e3,color:"danger"}).then(e=>{e.present()})}requestUser(){let e=this;e.api.get("/AppControleAcesso/UsuarioLogado").then(t=>{console.log(t),localStorage.setItem("ambepUser",JSON.stringify(t)),this.controleAcessoProvider.exibeMenuCarteirinha().then(t=>{console.log(t),e.appComponent.temCarteirinha=t}),e.controleAcessoProvider.menus().then(t=>{console.log(t),e.loading.then(e=>{e.dismiss()}),e.appComponent.menus=t,localStorage.setItem("ambepMenu",JSON.stringify(t)),e.loading.then(e=>{e.dismiss()}),e.router.navigateByUrl("")},t=>{e.loading.then(e=>{e.dismiss()}),e.toastController.create({message:t.message,position:"bottom",duration:6e3,color:"danger"}).then(e=>{e.present()})})},t=>{e.loading.then(e=>{e.dismiss()}),e.toastController.create({message:t.message,position:"bottom",duration:6e3,color:"danger"}).then(e=>{e.present()})})}cadastrarUsuario(){this.router.navigateByUrl("/cadastrar-usuario")}esqueciSenha(){this.router.navigateByUrl("/esqueci-senha")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(i.SH),l.Y36(c.g),l.Y36(s.F0),l.Y36(s.gz),l.Y36(i.HT),l.Y36(i.yF),l.Y36(g.N),l.Y36(p.y))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-login"]],decls:25,vars:2,consts:[[1,"splash-bg"],[1,"splash-info"],[1,"splash-logo"],[1,"splash-intro"],["position","floating"],["type","email","name","email",3,"ngModel","ngModelChange"],["type","password","name","senha","maxlength","20",3,"ngModel","ngModelChange"],[2,"padding","5%"],["expand","block","size","large","color","primary","block","",3,"click"],["expand","block","size","large","color","light","block","",3,"click"],[3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-content"),l._UZ(1,"div",0),l.TgZ(2,"div",1),l._UZ(3,"div",2),l.TgZ(4,"div",3),l._uU(5," Informe as credenciais "),l.qZA(),l.qZA(),l.TgZ(6,"form"),l.TgZ(7,"ion-list"),l.TgZ(8,"ion-item"),l.TgZ(9,"ion-label",4),l._uU(10,"E-mail"),l.qZA(),l.TgZ(11,"ion-input",5),l.NdJ("ngModelChange",function(e){return t.account.email=e}),l.qZA(),l.qZA(),l.TgZ(12,"ion-item"),l.TgZ(13,"ion-label",4),l._uU(14,"Senha"),l.qZA(),l.TgZ(15,"ion-input",6),l.NdJ("ngModelChange",function(e){return t.account.senha=e}),l.qZA(),l.qZA(),l.TgZ(16,"div",7),l.TgZ(17,"ion-button",8),l.NdJ("click",function(){return t.autenticar()}),l._uU(18,"ACESSAR"),l.qZA(),l._UZ(19,"br"),l.TgZ(20,"ion-button",9),l.NdJ("click",function(){return t.cadastrarUsuario()}),l._uU(21,"CADASTRAR"),l.qZA(),l._UZ(22,"br"),l.TgZ(23,"a",10),l.NdJ("click",function(){return t.esqueciSenha()}),l._uU(24,"Esqueci a senha"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(11),l.Q6J("ngModel",t.account.email),l.xp6(4),l.Q6J("ngModel",t.account.senha))},directives:[i.W2,a._Y,a.JL,a.F,i.q_,i.Ie,i.Q$,i.pK,i.j9,a.JJ,a.On,a.nD,i.YG],styles:[".splash-bg[_ngcontent-%COMP%]{position:relative;background:url(main-topo.8911e28560addd230a00.png) no-repeat #0000;background-size:cover;height:25%;z-index:1;background-repeat:repeat-x;animation:animatedBackground 40s linear infinite}@keyframes animatedBackground{0%{background-position:0 0}to{background-position:100% 0}}.splash-info[_ngcontent-%COMP%]{position:relative;z-index:2;margin-top:-64px;text-align:center}.splash-logo[_ngcontent-%COMP%]{margin:auto;background:url(icone-login.5ffeaeebaefa841d9a38.svg) repeat #0000;background-size:100%;width:128px;height:128px}.splash-intro[_ngcontent-%COMP%]{font-size:18px;font-weight:700;max-width:80%;margin:auto}button.login[_ngcontent-%COMP%]{margin-top:25px;background-color:#fff;box-shadow:0 1px 2px #0003;color:#333}button.login.activated[_ngcontent-%COMP%]{background-color:#dcdcdc}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(u)],s.Bz]}),e})(),d=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,a.u5,i.Pc,h]]}),e})()}}]);